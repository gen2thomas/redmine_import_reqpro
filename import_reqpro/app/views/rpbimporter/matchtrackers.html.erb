<% content_for :header_tags do %>
    <%= stylesheet_link_tag 'rpbimporter', :plugin => 'import_reqpro' %>
<% end %>

<h2><%= l(:label_match_trackers) %></h2>

<% form_tag({:action => 'matchattributes'}, {:multipart => true}) do %>
	<legend><%= l(:label_matchtrackers_select) %></legend>
	<h3><%= l(:label_used_trackers) %></h3>
	<table class="list">
		<tbody>
			<% @req_types_for_view.each_pair do |col_key,column| %>
				<%  matched = ''	
					@trackers.each do |k|	if k.to_s.casecmp(col_key.to_s) == 0 then matched = k end	end 
				%>
				<tr class="<%= cycle("odd", "even") %>">
					<td><%= column[:name] %>, <%= column[:projects].to_a.join("/") %>.<%= col_key %>:</td>
					<td><%= select_tag "fields_map_tracker[#{col_key}]",
					  "<option value=\"\">#{l(:option_ignore)}</option>" + "<option value=#{col_key}>+#{col_key}</option>" +
					  options_for_select( @trackers, matched ) %></td>
				</tr>
			<% end %>
		</tbody>
	</table>

	<fieldset class="box"><legend><%= l(:label_attributes_checking_settings) %></legend>
		<label><%= check_box_tag "deep_check_attributes", true, true %> <%= l(:label_deep_check_attributes) %> </label><br/>
		<label><%= check_box_tag "conflate_attributes", true, true %> <%= l(:label_conflate_attributes) %> </label><br/>
	</fieldset>
	<%= submit_tag l(:button_match_attributes) %><br/>
<% end %>

<hr/>
